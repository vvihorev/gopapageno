// Code generated by Gopapageno; DO NOT EDIT.
package xpath

import (
	"github.com/giornetta/gopapageno"
	"strings"
	"fmt"
	"os"
)

type peSemValue struct {
	pe_id   int
	builder builder
}

func notNode(pred *predicate) *predicate {
	node := predNode{op: not()}
	pred.root.parent = &node
	node.left = pred.root
	pred.root = &node
	return pred
}

func newAtom(pe_id int) *predicate {
	node := predNode{op: atom()}
	return &predicate{root: &node, undoneAtoms: map[int]*predNode{pe_id: &node}}
}

func combine(op operator, dst, src *predicate) *predicate {
	node := predNode{op: op, left: dst.root, right: src.root}
	dst.root.parent = &node
	src.root.parent = &node

	for k, v := range src.undoneAtoms {
		dst.undoneAtoms[k] = v
	}
	dst.root = &node
	return dst
}

func (pe peSemValue) end() int {
	switch pe.builder.(type) {
	case *fpeBuilder:
		pe_id, _ := udpeGlobalTable.addFpe(pe.builder.(*fpeBuilder).end())
		return pe_id
	case *rpeBuilder:
		pe_id, _ := udpeGlobalTable.addRpe(pe.builder.(*rpeBuilder).end())
		return pe_id
	default:
		panic("something worong")
	}
}

func appendStep(pe *peSemValue, step udpeTest, axis axis) *peSemValue {
	if pe == nil {
		pe = &peSemValue{}
		if axis == child || axis == descendantOrSelf {
			pe.builder = &fpeBuilder{}
		} else {
			pe.builder = &rpeBuilder{}
		}

		pe.builder.addAxis(axis)
		pe.builder.addUdpeTest(step)
		return pe
	}

	switch pe.builder.(type) {
	case *fpeBuilder:
		if axis == parent || axis == ancestorOrSelf {
			pe.pe_id, _ = udpeGlobalTable.addFpe(pe.builder.(*fpeBuilder).end())
			pe.builder = &rpeBuilder{}
		} else {
			pe.builder = pe.builder.(*fpeBuilder)
		}
	case *rpeBuilder:
		if axis == child || axis == descendantOrSelf {
			pe.pe_id, _ = udpeGlobalTable.addRpe(pe.builder.(*rpeBuilder).end())
			pe.builder = &fpeBuilder{}
		} else {
			pe.builder = pe.builder.(*rpeBuilder)
		}
	default:
		panic("something worong")
	}

	pe.builder.addAxis(axis)
	pe.builder.addUdpeTest(step)
	return pe
}

// var parserElementsPools []*gopapageno.Pool[xpath.Element]

// ParserPreallocMem initializes all the memory pools required by the semantic function of the parser.
func ParserPreallocMem(inputSize int, numThreads int) {
    // poolSizePerThread := 10000

    // parserElementsPools = make([]*gopapageno.Pool[xpath.Element], numThreads)
    // for i := 0; i < numThreads; i++ {
    //     parserElementsPools[i] = gopapageno.NewPool[xpath.Element](poolSizePerThread)
    // }
}


// Non-terminals
const (
	AndExpr_Factor_OrExpr = gopapageno.TokenEmpty + 1 + iota
	AndExpr_Factor_OrExpr_Path
	AndExpr_Factor_OrExpr_Step
	AndExpr_Factor_OrExpr_Step_Test
	AndExpr_OrExpr
	OrExpr
	Query
)

// Terminals
const (
	ANCESTOR = gopapageno.TokenTerm + 1 + iota
	AND
	AT
	CHILD
	DESCENDANT
	EQ
	IDENT
	LBR
	LPAR
	NOT
	OR
	PARENT
	RBR
	RPAR
	STRING
	TEXT
)

func DumpGraph[ValueType any](root *gopapageno.Token, f *os.File) {
	sb := strings.Builder{}
	sb.WriteString("digraph parse_tree {\n")
	sb.WriteString("ratio = fill;\n")
	sb.WriteString("node [style=filled];\n")

	var graphPrintRec func(t *gopapageno.Token, p *gopapageno.Token, sb *strings.Builder, i int)
	graphPrintRec = func(t *gopapageno.Token, p *gopapageno.Token, sb *strings.Builder, i int) {
		if t == nil {
			return
		}

		if p == nil {
			graphPrintRec(t.Child, t, sb, i+1)
			return
		}

		var t_name, t_color, p_name, p_color string

		switch p.Type {
		case AndExpr_Factor_OrExpr:
			p_name, p_color = "AndExpr_Factor_OrExpr", "0.408 0.498 1.000"
		case AndExpr_Factor_OrExpr_Path:
			p_name, p_color = "AndExpr_Factor_OrExpr_Path", "0.408 0.498 1.000"
		case AndExpr_Factor_OrExpr_Step:
			p_name, p_color = "AndExpr_Factor_OrExpr_Step", "0.408 0.498 1.000"
		case AndExpr_Factor_OrExpr_Step_Test:
			p_name, p_color = "AndExpr_Factor_OrExpr_Step_Test", "0.408 0.498 1.000"
		case AndExpr_OrExpr:
			p_name, p_color = "AndExpr_OrExpr", "0.408 0.498 1.000"
		case OrExpr:
			p_name, p_color = "OrExpr", "0.408 0.498 1.000"
		case Query:
			p_name, p_color = "Query", "0.408 0.498 1.000"
		case gopapageno.TokenEmpty:
			p_name, p_color = "__EMPTY__", "0.408 0.498 1.000"
		case ANCESTOR:
			p_name, p_color = "ANCESTOR", "0.641 0.212 1.000"
		case AND:
			p_name, p_color = "AND", "0.641 0.212 1.000"
		case AT:
			p_name, p_color = "AT", "0.641 0.212 1.000"
		case CHILD:
			p_name, p_color = "CHILD", "0.641 0.212 1.000"
		case DESCENDANT:
			p_name, p_color = "DESCENDANT", "0.641 0.212 1.000"
		case EQ:
			p_name, p_color = "EQ", "0.641 0.212 1.000"
		case IDENT:
			p_name, p_color = "IDENT", "0.641 0.212 1.000"
		case LBR:
			p_name, p_color = "LBR", "0.641 0.212 1.000"
		case LPAR:
			p_name, p_color = "LPAR", "0.641 0.212 1.000"
		case NOT:
			p_name, p_color = "NOT", "0.641 0.212 1.000"
		case OR:
			p_name, p_color = "OR", "0.641 0.212 1.000"
		case PARENT:
			p_name, p_color = "PARENT", "0.641 0.212 1.000"
		case RBR:
			p_name, p_color = "RBR", "0.641 0.212 1.000"
		case RPAR:
			p_name, p_color = "RPAR", "0.641 0.212 1.000"
		case STRING:
			p_name, p_color = "STRING", "0.641 0.212 1.000"
		case TEXT:
			p_name, p_color = "TEXT", "0.641 0.212 1.000"
		case gopapageno.TokenTerm:
			p_name, p_color = "__TERM__", "0.641 0.212 1.000"
		}

		switch t.Type {
		case AndExpr_Factor_OrExpr:
			t_name, t_color = "AndExpr_Factor_OrExpr", "0.408 0.498 1.000"
		case AndExpr_Factor_OrExpr_Path:
			t_name, t_color = "AndExpr_Factor_OrExpr_Path", "0.408 0.498 1.000"
		case AndExpr_Factor_OrExpr_Step:
			t_name, t_color = "AndExpr_Factor_OrExpr_Step", "0.408 0.498 1.000"
		case AndExpr_Factor_OrExpr_Step_Test:
			t_name, t_color = "AndExpr_Factor_OrExpr_Step_Test", "0.408 0.498 1.000"
		case AndExpr_OrExpr:
			t_name, t_color = "AndExpr_OrExpr", "0.408 0.498 1.000"
		case OrExpr:
			t_name, t_color = "OrExpr", "0.408 0.498 1.000"
		case Query:
			t_name, t_color = "Query", "0.408 0.498 1.000"
		case gopapageno.TokenEmpty:
			t_name, t_color = "__EMPTY__", "0.408 0.498 1.000"
		case ANCESTOR:
			t_name, t_color = "ANCESTOR", "0.641 0.212 1.000"
		case AND:
			t_name, t_color = "AND", "0.641 0.212 1.000"
		case AT:
			t_name, t_color = "AT", "0.641 0.212 1.000"
		case CHILD:
			t_name, t_color = "CHILD", "0.641 0.212 1.000"
		case DESCENDANT:
			t_name, t_color = "DESCENDANT", "0.641 0.212 1.000"
		case EQ:
			t_name, t_color = "EQ", "0.641 0.212 1.000"
		case IDENT:
			t_name, t_color = "IDENT", "0.641 0.212 1.000"
		case LBR:
			t_name, t_color = "LBR", "0.641 0.212 1.000"
		case LPAR:
			t_name, t_color = "LPAR", "0.641 0.212 1.000"
		case NOT:
			t_name, t_color = "NOT", "0.641 0.212 1.000"
		case OR:
			t_name, t_color = "OR", "0.641 0.212 1.000"
		case PARENT:
			t_name, t_color = "PARENT", "0.641 0.212 1.000"
		case RBR:
			t_name, t_color = "RBR", "0.641 0.212 1.000"
		case RPAR:
			t_name, t_color = "RPAR", "0.641 0.212 1.000"
		case STRING:
			t_name, t_color = "STRING", "0.641 0.212 1.000"
		case TEXT:
			t_name, t_color = "TEXT", "0.641 0.212 1.000"
		case gopapageno.TokenTerm:
			t_name, t_color = "__TERM__", "0.641 0.212 1.000"
		}

		sb.WriteString(fmt.Sprintf("\"%p\" -> \"%p\";\n", p, t))
		sb.WriteString(fmt.Sprintf("\"%p\" [label=\"%s\" color=\"%s\"];\n", p, p_name, p_color))
		sb.WriteString(fmt.Sprintf("\"%p\" [label=\"%s\" color=\"%s\"];\n", t, t_name, t_color))

		graphPrintRec(t.Child, t, sb, i+1)
		graphPrintRec(t.Next, p, sb, i)
	}
	graphPrintRec(root, nil, &sb, 0)
	sb.WriteString("}\n")

	fmt.Fprint(f, sb.String())
}


func SprintToken[ValueType any](root *gopapageno.Token) string {
	var sprintRec func(t *gopapageno.Token, sb *strings.Builder, indent string)

	sprintRec = func(t *gopapageno.Token, sb *strings.Builder, indent string) {
		if t == nil {
			return
		}

		sb.WriteString(indent)
		if t.Next == nil {
			sb.WriteString("└── ")
			indent += "    "
		} else {
			sb.WriteString("├── ")
			indent += "|   "
		}

		switch t.Type {
		case AndExpr_Factor_OrExpr:
			sb.WriteString("AndExpr_Factor_OrExpr")
		case AndExpr_Factor_OrExpr_Path:
			sb.WriteString("AndExpr_Factor_OrExpr_Path")
		case AndExpr_Factor_OrExpr_Step:
			sb.WriteString("AndExpr_Factor_OrExpr_Step")
		case AndExpr_Factor_OrExpr_Step_Test:
			sb.WriteString("AndExpr_Factor_OrExpr_Step_Test")
		case AndExpr_OrExpr:
			sb.WriteString("AndExpr_OrExpr")
		case OrExpr:
			sb.WriteString("OrExpr")
		case Query:
			sb.WriteString("Query")
		case gopapageno.TokenEmpty:
			sb.WriteString("Empty")
		case ANCESTOR:
			sb.WriteString("ANCESTOR")
		case AND:
			sb.WriteString("AND")
		case AT:
			sb.WriteString("AT")
		case CHILD:
			sb.WriteString("CHILD")
		case DESCENDANT:
			sb.WriteString("DESCENDANT")
		case EQ:
			sb.WriteString("EQ")
		case IDENT:
			sb.WriteString("IDENT")
		case LBR:
			sb.WriteString("LBR")
		case LPAR:
			sb.WriteString("LPAR")
		case NOT:
			sb.WriteString("NOT")
		case OR:
			sb.WriteString("OR")
		case PARENT:
			sb.WriteString("PARENT")
		case RBR:
			sb.WriteString("RBR")
		case RPAR:
			sb.WriteString("RPAR")
		case STRING:
			sb.WriteString("STRING")
		case TEXT:
			sb.WriteString("TEXT")
		case gopapageno.TokenTerm:
			sb.WriteString("Term")
		default:
			sb.WriteString("Unknown")
		}

		if t.Value != nil {
			if v, ok := any(t.Value).(*ValueType); ok {
				sb.WriteString(fmt.Sprintf(": %v", *v))
			}
		}
		
		sb.WriteString("\n")
		
		sprintRec(t.Child, sb, indent)
		sprintRec(t.Next, sb, indent[:len(indent)-4])
	}

	var sb strings.Builder
	
	sprintRec(root, &sb, "")
	
	return sb.String()
}

func NewGrammar() *gopapageno.Grammar {
	numTerminals := uint16(17)
	numNonTerminals := uint16(8)

	maxRHSLen := 4
	rules := []gopapageno.Rule{
		{AndExpr_OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr, AND, AndExpr_Factor_OrExpr}, gopapageno.RuleSimple},
		{AndExpr_OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr, AND, AndExpr_Factor_OrExpr_Path}, gopapageno.RuleSimple},
		{AndExpr_OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr, AND, AndExpr_Factor_OrExpr_Step}, gopapageno.RuleSimple},
		{AndExpr_OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr, AND, AndExpr_Factor_OrExpr_Step_Test}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr, OR, AndExpr_Factor_OrExpr}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr, OR, AndExpr_Factor_OrExpr_Path}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr, OR, AndExpr_Factor_OrExpr_Step}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr, OR, AndExpr_Factor_OrExpr_Step_Test}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr, OR, AndExpr_OrExpr}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Path, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Path, ANCESTOR, AndExpr_Factor_OrExpr_Step}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Path, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Path, ANCESTOR, AndExpr_Factor_OrExpr_Step_Test}, gopapageno.RuleSimple},
		{AndExpr_OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Path, AND, AndExpr_Factor_OrExpr}, gopapageno.RuleSimple},
		{AndExpr_OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Path, AND, AndExpr_Factor_OrExpr_Path}, gopapageno.RuleSimple},
		{AndExpr_OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Path, AND, AndExpr_Factor_OrExpr_Step}, gopapageno.RuleSimple},
		{AndExpr_OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Path, AND, AndExpr_Factor_OrExpr_Step_Test}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Path, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Path, CHILD, AndExpr_Factor_OrExpr_Step}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Path, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Path, CHILD, AndExpr_Factor_OrExpr_Step_Test}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Path, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Path, DESCENDANT, AndExpr_Factor_OrExpr_Step}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Path, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Path, DESCENDANT, AndExpr_Factor_OrExpr_Step_Test}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Path, OR, AndExpr_Factor_OrExpr}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Path, OR, AndExpr_Factor_OrExpr_Path}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Path, OR, AndExpr_Factor_OrExpr_Step}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Path, OR, AndExpr_Factor_OrExpr_Step_Test}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Path, OR, AndExpr_OrExpr}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Path, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Path, PARENT, AndExpr_Factor_OrExpr_Step}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Path, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Path, PARENT, AndExpr_Factor_OrExpr_Step_Test}, gopapageno.RuleSimple},
		{AndExpr_OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step, AND, AndExpr_Factor_OrExpr}, gopapageno.RuleSimple},
		{AndExpr_OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step, AND, AndExpr_Factor_OrExpr_Path}, gopapageno.RuleSimple},
		{AndExpr_OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step, AND, AndExpr_Factor_OrExpr_Step}, gopapageno.RuleSimple},
		{AndExpr_OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step, AND, AndExpr_Factor_OrExpr_Step_Test}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step, OR, AndExpr_Factor_OrExpr}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step, OR, AndExpr_Factor_OrExpr_Path}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step, OR, AndExpr_Factor_OrExpr_Step}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step, OR, AndExpr_Factor_OrExpr_Step_Test}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step, OR, AndExpr_OrExpr}, gopapageno.RuleSimple},
		{AndExpr_OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step_Test, AND, AndExpr_Factor_OrExpr}, gopapageno.RuleSimple},
		{AndExpr_OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step_Test, AND, AndExpr_Factor_OrExpr_Path}, gopapageno.RuleSimple},
		{AndExpr_OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step_Test, AND, AndExpr_Factor_OrExpr_Step}, gopapageno.RuleSimple},
		{AndExpr_OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step_Test, AND, AndExpr_Factor_OrExpr_Step_Test}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Step, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step_Test, LBR, AndExpr_Factor_OrExpr, RBR}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Step, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step_Test, LBR, AndExpr_Factor_OrExpr_Path, RBR}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Step, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step_Test, LBR, AndExpr_Factor_OrExpr_Step, RBR}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Step, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step_Test, LBR, AndExpr_Factor_OrExpr_Step_Test, RBR}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Step, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step_Test, LBR, AndExpr_OrExpr, RBR}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Step, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step_Test, LBR, OrExpr, RBR}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step_Test, OR, AndExpr_Factor_OrExpr}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step_Test, OR, AndExpr_Factor_OrExpr_Path}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step_Test, OR, AndExpr_Factor_OrExpr_Step}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step_Test, OR, AndExpr_Factor_OrExpr_Step_Test}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_Factor_OrExpr_Step_Test, OR, AndExpr_OrExpr}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_OrExpr, OR, AndExpr_Factor_OrExpr}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_OrExpr, OR, AndExpr_Factor_OrExpr_Path}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_OrExpr, OR, AndExpr_Factor_OrExpr_Step}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_OrExpr, OR, AndExpr_Factor_OrExpr_Step_Test}, gopapageno.RuleSimple},
		{OrExpr, []gopapageno.TokenType{AndExpr_OrExpr, OR, AndExpr_OrExpr}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Path, []gopapageno.TokenType{ANCESTOR, AndExpr_Factor_OrExpr_Step}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Path, []gopapageno.TokenType{ANCESTOR, AndExpr_Factor_OrExpr_Step_Test}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Step_Test, []gopapageno.TokenType{AT, IDENT}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Step_Test, []gopapageno.TokenType{AT, IDENT, EQ, STRING}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Path, []gopapageno.TokenType{CHILD, AndExpr_Factor_OrExpr_Step}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Path, []gopapageno.TokenType{CHILD, AndExpr_Factor_OrExpr_Step_Test}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Path, []gopapageno.TokenType{DESCENDANT, AndExpr_Factor_OrExpr_Step}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Path, []gopapageno.TokenType{DESCENDANT, AndExpr_Factor_OrExpr_Step_Test}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Step_Test, []gopapageno.TokenType{IDENT}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr, []gopapageno.TokenType{LPAR, AndExpr_Factor_OrExpr, RPAR}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr, []gopapageno.TokenType{LPAR, AndExpr_Factor_OrExpr_Path, RPAR}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr, []gopapageno.TokenType{LPAR, AndExpr_Factor_OrExpr_Step, RPAR}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr, []gopapageno.TokenType{LPAR, AndExpr_Factor_OrExpr_Step_Test, RPAR}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr, []gopapageno.TokenType{LPAR, AndExpr_OrExpr, RPAR}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr, []gopapageno.TokenType{LPAR, OrExpr, RPAR}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr, []gopapageno.TokenType{NOT, AndExpr_Factor_OrExpr_Path}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr, []gopapageno.TokenType{NOT, AndExpr_Factor_OrExpr_Step}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr, []gopapageno.TokenType{NOT, AndExpr_Factor_OrExpr_Step_Test}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr, []gopapageno.TokenType{NOT, LPAR, AndExpr_Factor_OrExpr, RPAR}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr, []gopapageno.TokenType{NOT, LPAR, AndExpr_Factor_OrExpr_Path, RPAR}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr, []gopapageno.TokenType{NOT, LPAR, AndExpr_Factor_OrExpr_Step, RPAR}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr, []gopapageno.TokenType{NOT, LPAR, AndExpr_Factor_OrExpr_Step_Test, RPAR}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr, []gopapageno.TokenType{NOT, LPAR, AndExpr_OrExpr, RPAR}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr, []gopapageno.TokenType{NOT, LPAR, OrExpr, RPAR}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Path, []gopapageno.TokenType{PARENT, AndExpr_Factor_OrExpr_Step}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Path, []gopapageno.TokenType{PARENT, AndExpr_Factor_OrExpr_Step_Test}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Step_Test, []gopapageno.TokenType{TEXT}, gopapageno.RuleSimple},
		{AndExpr_Factor_OrExpr_Step_Test, []gopapageno.TokenType{TEXT, EQ, STRING}, gopapageno.RuleSimple},
	}
	compressedRules := []uint16{0, 0, 14, 1, 31, 2, 89, 3, 207, 4, 265, 5, 388, 32769, 421, 32771, 434, 32772, 452, 32773, 465, 32775, 478, 32777, 481, 32778, 544, 32780, 627, 32784, 640, 0, 0, 2, 32770, 38, 32779, 61, 0, 0, 4, 1, 49, 2, 52, 3, 55, 4, 58, 5, 0, 0, 5, 1, 0, 5, 2, 0, 5, 3, 0, 0, 0, 5, 1, 74, 2, 77, 3, 80, 4, 83, 5, 86, 6, 4, 0, 6, 5, 0, 6, 6, 0, 6, 7, 0, 6, 8, 0, 0, 0, 6, 32769, 104, 32770, 117, 32772, 140, 32773, 153, 32779, 166, 32780, 194, 0, 0, 2, 3, 111, 4, 114, 2, 9, 0, 2, 10, 0, 0, 0, 4, 1, 128, 2, 131, 3, 134, 4, 137, 5, 11, 0, 5, 12, 0, 5, 13, 0, 5, 14, 0, 0, 0, 2, 3, 147, 4, 150, 2, 15, 0, 2, 16, 0, 0, 0, 2, 3, 160, 4, 163, 2, 17, 0, 2, 18, 0, 0, 0, 5, 1, 179, 2, 182, 3, 185, 4, 188, 5, 191, 6, 19, 0, 6, 20, 0, 6, 21, 0, 6, 22, 0, 6, 23, 0, 0, 0, 2, 3, 201, 4, 204, 2, 24, 0, 2, 25, 0, 0, 0, 2, 32770, 214, 32779, 237, 0, 0, 4, 1, 225, 2, 228, 3, 231, 4, 234, 5, 26, 0, 5, 27, 0, 5, 28, 0, 5, 29, 0, 0, 0, 5, 1, 250, 2, 253, 3, 256, 4, 259, 5, 262, 6, 30, 0, 6, 31, 0, 6, 32, 0, 6, 33, 0, 6, 34, 0, 0, 0, 3, 32770, 274, 32776, 297, 32779, 360, 0, 0, 4, 1, 285, 2, 288, 3, 291, 4, 294, 5, 35, 0, 5, 36, 0, 5, 37, 0, 5, 38, 0, 0, 0, 6, 1, 312, 2, 320, 3, 328, 4, 336, 5, 344, 6, 352, 0, 0, 1, 32781, 317, 3, 39, 0, 0, 0, 1, 32781, 325, 3, 40, 0, 0, 0, 1, 32781, 333, 3, 41, 0, 0, 0, 1, 32781, 341, 3, 42, 0, 0, 0, 1, 32781, 349, 3, 43, 0, 0, 0, 1, 32781, 357, 3, 44, 0, 0, 0, 5, 1, 373, 2, 376, 3, 379, 4, 382, 5, 385, 6, 45, 0, 6, 46, 0, 6, 47, 0, 6, 48, 0, 6, 49, 0, 0, 0, 1, 32779, 393, 0, 0, 5, 1, 406, 2, 409, 3, 412, 4, 415, 5, 418, 6, 50, 0, 6, 51, 0, 6, 52, 0, 6, 53, 0, 6, 54, 0, 0, 0, 2, 3, 428, 4, 431, 2, 55, 0, 2, 56, 0, 0, 0, 1, 32775, 439, 4, 57, 1, 32774, 444, 0, 0, 1, 32783, 449, 4, 58, 0, 0, 0, 2, 3, 459, 4, 462, 2, 59, 0, 2, 60, 0, 0, 0, 2, 3, 472, 4, 475, 2, 61, 0, 2, 62, 0, 4, 63, 0, 0, 0, 6, 1, 496, 2, 504, 3, 512, 4, 520, 5, 528, 6, 536, 0, 0, 1, 32782, 501, 1, 64, 0, 0, 0, 1, 32782, 509, 1, 65, 0, 0, 0, 1, 32782, 517, 1, 66, 0, 0, 0, 1, 32782, 525, 1, 67, 0, 0, 0, 1, 32782, 533, 1, 68, 0, 0, 0, 1, 32782, 541, 1, 69, 0, 0, 0, 4, 2, 555, 3, 558, 4, 561, 32777, 564, 1, 70, 0, 1, 71, 0, 1, 72, 0, 0, 0, 6, 1, 579, 2, 587, 3, 595, 4, 603, 5, 611, 6, 619, 0, 0, 1, 32782, 584, 1, 73, 0, 0, 0, 1, 32782, 592, 1, 74, 0, 0, 0, 1, 32782, 600, 1, 75, 0, 0, 0, 1, 32782, 608, 1, 76, 0, 0, 0, 1, 32782, 616, 1, 77, 0, 0, 0, 1, 32782, 624, 1, 78, 0, 0, 0, 2, 3, 634, 4, 637, 2, 79, 0, 2, 80, 0, 4, 81, 1, 32774, 645, 0, 0, 1, 32783, 650, 4, 82, 0	}

	precMatrix := [][]gopapageno.Precedence{
		{gopapageno.PrecEquals, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields},
		{gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecYields, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecYields},
		{gopapageno.PrecTakes, gopapageno.PrecYields, gopapageno.PrecEmpty, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecEmpty, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecTakes, gopapageno.PrecYields, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecYields},
		{gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEquals, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEquals, gopapageno.PrecEmpty},
		{gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecYields, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecYields},
		{gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecYields, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecYields},
		{gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty},
		{gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEquals, gopapageno.PrecEmpty},
		{gopapageno.PrecTakes, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecEmpty, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecEquals, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecYields},
		{gopapageno.PrecTakes, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecEmpty, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecEmpty, gopapageno.PrecEquals, gopapageno.PrecEmpty, gopapageno.PrecYields},
		{gopapageno.PrecTakes, gopapageno.PrecYields, gopapageno.PrecTakes, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecEmpty, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecTakes, gopapageno.PrecYields, gopapageno.PrecTakes, gopapageno.PrecEquals, gopapageno.PrecEmpty, gopapageno.PrecYields},
		{gopapageno.PrecTakes, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecEmpty, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecEmpty, gopapageno.PrecYields, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecYields},
		{gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecYields, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecYields, gopapageno.PrecYields, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecYields},
		{gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecEmpty},
		{gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecEmpty},
		{gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecEmpty},
		{gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecTakes, gopapageno.PrecEmpty, gopapageno.PrecEmpty, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecTakes, gopapageno.PrecEquals, gopapageno.PrecEmpty},
	}
	bitPackedMatrix := []uint64{
		12251244168589170004, 629637665892, 372014444257634816, 9406471509205066922, 1538262213470849696, 6165595102986372437, 12189697498042484049, 9405767830901227560, 3063021872248554122, 4, 
	}

	fn := func(ruleDescription uint16, ruleFlags gopapageno.RuleFlags, lhs *gopapageno.Token, rhs []*gopapageno.Token, thread int){
		switch ruleDescription {
		case 0:
			AndExpr_OrExpr0 := lhs
			AndExpr_Factor_OrExpr1 := rhs[0]
			AND2 := rhs[1]
			AndExpr_Factor_OrExpr3 := rhs[2]

			AndExpr_OrExpr0.Child = AndExpr_Factor_OrExpr1
			AndExpr_Factor_OrExpr1.Next = AND2
			AND2.Next = AndExpr_Factor_OrExpr3
			AndExpr_OrExpr0.LastChild = AndExpr_Factor_OrExpr3

			{
				switch AndExpr_Factor_OrExpr1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr3.Value = newAtom(pe.end())
				}
			
				AndExpr_OrExpr0.Value = combine(and(), AndExpr_Factor_OrExpr1.Value.(*predicate), AndExpr_Factor_OrExpr3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr1
			_ = AND2
			_ = AndExpr_Factor_OrExpr3
		case 1:
			AndExpr_OrExpr0 := lhs
			AndExpr_Factor_OrExpr1 := rhs[0]
			AND2 := rhs[1]
			AndExpr_Factor_OrExpr_Path3 := rhs[2]

			AndExpr_OrExpr0.Child = AndExpr_Factor_OrExpr1
			AndExpr_Factor_OrExpr1.Next = AND2
			AND2.Next = AndExpr_Factor_OrExpr_Path3
			AndExpr_OrExpr0.LastChild = AndExpr_Factor_OrExpr_Path3

			{
				switch AndExpr_Factor_OrExpr1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Path3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Path3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Path3.Value = newAtom(pe.end())
				}
			
				AndExpr_OrExpr0.Value = combine(and(), AndExpr_Factor_OrExpr1.Value.(*predicate), AndExpr_Factor_OrExpr_Path3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr1
			_ = AND2
			_ = AndExpr_Factor_OrExpr_Path3
		case 2:
			AndExpr_OrExpr0 := lhs
			AndExpr_Factor_OrExpr1 := rhs[0]
			AND2 := rhs[1]
			AndExpr_Factor_OrExpr_Step3 := rhs[2]

			AndExpr_OrExpr0.Child = AndExpr_Factor_OrExpr1
			AndExpr_Factor_OrExpr1.Next = AND2
			AND2.Next = AndExpr_Factor_OrExpr_Step3
			AndExpr_OrExpr0.LastChild = AndExpr_Factor_OrExpr_Step3

			{
				switch AndExpr_Factor_OrExpr1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Step3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step3.Value = newAtom(pe.end())
				}
			
				AndExpr_OrExpr0.Value = combine(and(), AndExpr_Factor_OrExpr1.Value.(*predicate), AndExpr_Factor_OrExpr_Step3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr1
			_ = AND2
			_ = AndExpr_Factor_OrExpr_Step3
		case 3:
			AndExpr_OrExpr0 := lhs
			AndExpr_Factor_OrExpr1 := rhs[0]
			AND2 := rhs[1]
			AndExpr_Factor_OrExpr_Step_Test3 := rhs[2]

			AndExpr_OrExpr0.Child = AndExpr_Factor_OrExpr1
			AndExpr_Factor_OrExpr1.Next = AND2
			AND2.Next = AndExpr_Factor_OrExpr_Step_Test3
			AndExpr_OrExpr0.LastChild = AndExpr_Factor_OrExpr_Step_Test3

			{
				switch AndExpr_Factor_OrExpr1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Step_Test3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step_Test3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step_Test3.Value = newAtom(pe.end())
				}
			
				AndExpr_OrExpr0.Value = combine(and(), AndExpr_Factor_OrExpr1.Value.(*predicate), AndExpr_Factor_OrExpr_Step_Test3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr1
			_ = AND2
			_ = AndExpr_Factor_OrExpr_Step_Test3
		case 4:
			OrExpr0 := lhs
			AndExpr_Factor_OrExpr1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_Factor_OrExpr3 := rhs[2]

			OrExpr0.Child = AndExpr_Factor_OrExpr1
			AndExpr_Factor_OrExpr1.Next = OR2
			OR2.Next = AndExpr_Factor_OrExpr3
			OrExpr0.LastChild = AndExpr_Factor_OrExpr3

			{
				switch AndExpr_Factor_OrExpr1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_Factor_OrExpr1.Value.(*predicate), AndExpr_Factor_OrExpr3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr1
			_ = OR2
			_ = AndExpr_Factor_OrExpr3
		case 5:
			OrExpr0 := lhs
			AndExpr_Factor_OrExpr1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_Factor_OrExpr_Path3 := rhs[2]

			OrExpr0.Child = AndExpr_Factor_OrExpr1
			AndExpr_Factor_OrExpr1.Next = OR2
			OR2.Next = AndExpr_Factor_OrExpr_Path3
			OrExpr0.LastChild = AndExpr_Factor_OrExpr_Path3

			{
				switch AndExpr_Factor_OrExpr1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Path3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Path3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Path3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_Factor_OrExpr1.Value.(*predicate), AndExpr_Factor_OrExpr_Path3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr1
			_ = OR2
			_ = AndExpr_Factor_OrExpr_Path3
		case 6:
			OrExpr0 := lhs
			AndExpr_Factor_OrExpr1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_Factor_OrExpr_Step3 := rhs[2]

			OrExpr0.Child = AndExpr_Factor_OrExpr1
			AndExpr_Factor_OrExpr1.Next = OR2
			OR2.Next = AndExpr_Factor_OrExpr_Step3
			OrExpr0.LastChild = AndExpr_Factor_OrExpr_Step3

			{
				switch AndExpr_Factor_OrExpr1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Step3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_Factor_OrExpr1.Value.(*predicate), AndExpr_Factor_OrExpr_Step3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr1
			_ = OR2
			_ = AndExpr_Factor_OrExpr_Step3
		case 7:
			OrExpr0 := lhs
			AndExpr_Factor_OrExpr1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_Factor_OrExpr_Step_Test3 := rhs[2]

			OrExpr0.Child = AndExpr_Factor_OrExpr1
			AndExpr_Factor_OrExpr1.Next = OR2
			OR2.Next = AndExpr_Factor_OrExpr_Step_Test3
			OrExpr0.LastChild = AndExpr_Factor_OrExpr_Step_Test3

			{
				switch AndExpr_Factor_OrExpr1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Step_Test3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step_Test3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step_Test3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_Factor_OrExpr1.Value.(*predicate), AndExpr_Factor_OrExpr_Step_Test3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr1
			_ = OR2
			_ = AndExpr_Factor_OrExpr_Step_Test3
		case 8:
			OrExpr0 := lhs
			AndExpr_Factor_OrExpr1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_OrExpr3 := rhs[2]

			OrExpr0.Child = AndExpr_Factor_OrExpr1
			AndExpr_Factor_OrExpr1.Next = OR2
			OR2.Next = AndExpr_OrExpr3
			OrExpr0.LastChild = AndExpr_OrExpr3

			{
				switch AndExpr_Factor_OrExpr1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_OrExpr3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_OrExpr3.Value.(udpeTest), child)
					AndExpr_OrExpr3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_Factor_OrExpr1.Value.(*predicate), AndExpr_OrExpr3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr1
			_ = OR2
			_ = AndExpr_OrExpr3
		case 9:
			AndExpr_Factor_OrExpr_Path0 := lhs
			AndExpr_Factor_OrExpr_Path1 := rhs[0]
			ANCESTOR2 := rhs[1]
			AndExpr_Factor_OrExpr_Step3 := rhs[2]

			AndExpr_Factor_OrExpr_Path0.Child = AndExpr_Factor_OrExpr_Path1
			AndExpr_Factor_OrExpr_Path1.Next = ANCESTOR2
			ANCESTOR2.Next = AndExpr_Factor_OrExpr_Step3
			AndExpr_Factor_OrExpr_Path0.LastChild = AndExpr_Factor_OrExpr_Step3

			{
				AndExpr_Factor_OrExpr_Path0.Value = appendStep(AndExpr_Factor_OrExpr_Path1.Value.(*peSemValue), AndExpr_Factor_OrExpr_Step3.Value.(udpeTest), ancestorOrSelf)
			}
			_ = AndExpr_Factor_OrExpr_Path1
			_ = ANCESTOR2
			_ = AndExpr_Factor_OrExpr_Step3
		case 10:
			AndExpr_Factor_OrExpr_Path0 := lhs
			AndExpr_Factor_OrExpr_Path1 := rhs[0]
			ANCESTOR2 := rhs[1]
			AndExpr_Factor_OrExpr_Step_Test3 := rhs[2]

			AndExpr_Factor_OrExpr_Path0.Child = AndExpr_Factor_OrExpr_Path1
			AndExpr_Factor_OrExpr_Path1.Next = ANCESTOR2
			ANCESTOR2.Next = AndExpr_Factor_OrExpr_Step_Test3
			AndExpr_Factor_OrExpr_Path0.LastChild = AndExpr_Factor_OrExpr_Step_Test3

			{
				AndExpr_Factor_OrExpr_Path0.Value = appendStep(AndExpr_Factor_OrExpr_Path1.Value.(*peSemValue), AndExpr_Factor_OrExpr_Step_Test3.Value.(udpeTest), ancestorOrSelf)
			}
			_ = AndExpr_Factor_OrExpr_Path1
			_ = ANCESTOR2
			_ = AndExpr_Factor_OrExpr_Step_Test3
		case 11:
			AndExpr_OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Path1 := rhs[0]
			AND2 := rhs[1]
			AndExpr_Factor_OrExpr3 := rhs[2]

			AndExpr_OrExpr0.Child = AndExpr_Factor_OrExpr_Path1
			AndExpr_Factor_OrExpr_Path1.Next = AND2
			AND2.Next = AndExpr_Factor_OrExpr3
			AndExpr_OrExpr0.LastChild = AndExpr_Factor_OrExpr3

			{
				switch AndExpr_Factor_OrExpr_Path1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Path1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Path1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr3.Value = newAtom(pe.end())
				}
			
				AndExpr_OrExpr0.Value = combine(and(), AndExpr_Factor_OrExpr_Path1.Value.(*predicate), AndExpr_Factor_OrExpr3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Path1
			_ = AND2
			_ = AndExpr_Factor_OrExpr3
		case 12:
			AndExpr_OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Path1 := rhs[0]
			AND2 := rhs[1]
			AndExpr_Factor_OrExpr_Path3 := rhs[2]

			AndExpr_OrExpr0.Child = AndExpr_Factor_OrExpr_Path1
			AndExpr_Factor_OrExpr_Path1.Next = AND2
			AND2.Next = AndExpr_Factor_OrExpr_Path3
			AndExpr_OrExpr0.LastChild = AndExpr_Factor_OrExpr_Path3

			{
				switch AndExpr_Factor_OrExpr_Path1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Path1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Path1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Path3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Path3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Path3.Value = newAtom(pe.end())
				}
			
				AndExpr_OrExpr0.Value = combine(and(), AndExpr_Factor_OrExpr_Path1.Value.(*predicate), AndExpr_Factor_OrExpr_Path3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Path1
			_ = AND2
			_ = AndExpr_Factor_OrExpr_Path3
		case 13:
			AndExpr_OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Path1 := rhs[0]
			AND2 := rhs[1]
			AndExpr_Factor_OrExpr_Step3 := rhs[2]

			AndExpr_OrExpr0.Child = AndExpr_Factor_OrExpr_Path1
			AndExpr_Factor_OrExpr_Path1.Next = AND2
			AND2.Next = AndExpr_Factor_OrExpr_Step3
			AndExpr_OrExpr0.LastChild = AndExpr_Factor_OrExpr_Step3

			{
				switch AndExpr_Factor_OrExpr_Path1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Path1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Path1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Step3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step3.Value = newAtom(pe.end())
				}
			
				AndExpr_OrExpr0.Value = combine(and(), AndExpr_Factor_OrExpr_Path1.Value.(*predicate), AndExpr_Factor_OrExpr_Step3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Path1
			_ = AND2
			_ = AndExpr_Factor_OrExpr_Step3
		case 14:
			AndExpr_OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Path1 := rhs[0]
			AND2 := rhs[1]
			AndExpr_Factor_OrExpr_Step_Test3 := rhs[2]

			AndExpr_OrExpr0.Child = AndExpr_Factor_OrExpr_Path1
			AndExpr_Factor_OrExpr_Path1.Next = AND2
			AND2.Next = AndExpr_Factor_OrExpr_Step_Test3
			AndExpr_OrExpr0.LastChild = AndExpr_Factor_OrExpr_Step_Test3

			{
				switch AndExpr_Factor_OrExpr_Path1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Path1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Path1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Step_Test3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step_Test3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step_Test3.Value = newAtom(pe.end())
				}
			
				AndExpr_OrExpr0.Value = combine(and(), AndExpr_Factor_OrExpr_Path1.Value.(*predicate), AndExpr_Factor_OrExpr_Step_Test3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Path1
			_ = AND2
			_ = AndExpr_Factor_OrExpr_Step_Test3
		case 15:
			AndExpr_Factor_OrExpr_Path0 := lhs
			AndExpr_Factor_OrExpr_Path1 := rhs[0]
			CHILD2 := rhs[1]
			AndExpr_Factor_OrExpr_Step3 := rhs[2]

			AndExpr_Factor_OrExpr_Path0.Child = AndExpr_Factor_OrExpr_Path1
			AndExpr_Factor_OrExpr_Path1.Next = CHILD2
			CHILD2.Next = AndExpr_Factor_OrExpr_Step3
			AndExpr_Factor_OrExpr_Path0.LastChild = AndExpr_Factor_OrExpr_Step3

			{
				AndExpr_Factor_OrExpr_Path0.Value = appendStep(AndExpr_Factor_OrExpr_Path1.Value.(*peSemValue), AndExpr_Factor_OrExpr_Step3.Value.(udpeTest), child)
			}
			_ = AndExpr_Factor_OrExpr_Path1
			_ = CHILD2
			_ = AndExpr_Factor_OrExpr_Step3
		case 16:
			AndExpr_Factor_OrExpr_Path0 := lhs
			AndExpr_Factor_OrExpr_Path1 := rhs[0]
			CHILD2 := rhs[1]
			AndExpr_Factor_OrExpr_Step_Test3 := rhs[2]

			AndExpr_Factor_OrExpr_Path0.Child = AndExpr_Factor_OrExpr_Path1
			AndExpr_Factor_OrExpr_Path1.Next = CHILD2
			CHILD2.Next = AndExpr_Factor_OrExpr_Step_Test3
			AndExpr_Factor_OrExpr_Path0.LastChild = AndExpr_Factor_OrExpr_Step_Test3

			{
				AndExpr_Factor_OrExpr_Path0.Value = appendStep(AndExpr_Factor_OrExpr_Path1.Value.(*peSemValue), AndExpr_Factor_OrExpr_Step_Test3.Value.(udpeTest), child)
			}
			_ = AndExpr_Factor_OrExpr_Path1
			_ = CHILD2
			_ = AndExpr_Factor_OrExpr_Step_Test3
		case 17:
			AndExpr_Factor_OrExpr_Path0 := lhs
			AndExpr_Factor_OrExpr_Path1 := rhs[0]
			DESCENDANT2 := rhs[1]
			AndExpr_Factor_OrExpr_Step3 := rhs[2]

			AndExpr_Factor_OrExpr_Path0.Child = AndExpr_Factor_OrExpr_Path1
			AndExpr_Factor_OrExpr_Path1.Next = DESCENDANT2
			DESCENDANT2.Next = AndExpr_Factor_OrExpr_Step3
			AndExpr_Factor_OrExpr_Path0.LastChild = AndExpr_Factor_OrExpr_Step3

			{
				AndExpr_Factor_OrExpr_Path0.Value = appendStep(AndExpr_Factor_OrExpr_Path1.Value.(*peSemValue), AndExpr_Factor_OrExpr_Step3.Value.(udpeTest), descendantOrSelf)
			}
			_ = AndExpr_Factor_OrExpr_Path1
			_ = DESCENDANT2
			_ = AndExpr_Factor_OrExpr_Step3
		case 18:
			AndExpr_Factor_OrExpr_Path0 := lhs
			AndExpr_Factor_OrExpr_Path1 := rhs[0]
			DESCENDANT2 := rhs[1]
			AndExpr_Factor_OrExpr_Step_Test3 := rhs[2]

			AndExpr_Factor_OrExpr_Path0.Child = AndExpr_Factor_OrExpr_Path1
			AndExpr_Factor_OrExpr_Path1.Next = DESCENDANT2
			DESCENDANT2.Next = AndExpr_Factor_OrExpr_Step_Test3
			AndExpr_Factor_OrExpr_Path0.LastChild = AndExpr_Factor_OrExpr_Step_Test3

			{
				AndExpr_Factor_OrExpr_Path0.Value = appendStep(AndExpr_Factor_OrExpr_Path1.Value.(*peSemValue), AndExpr_Factor_OrExpr_Step_Test3.Value.(udpeTest), descendantOrSelf)
			}
			_ = AndExpr_Factor_OrExpr_Path1
			_ = DESCENDANT2
			_ = AndExpr_Factor_OrExpr_Step_Test3
		case 19:
			OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Path1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_Factor_OrExpr3 := rhs[2]

			OrExpr0.Child = AndExpr_Factor_OrExpr_Path1
			AndExpr_Factor_OrExpr_Path1.Next = OR2
			OR2.Next = AndExpr_Factor_OrExpr3
			OrExpr0.LastChild = AndExpr_Factor_OrExpr3

			{
				switch AndExpr_Factor_OrExpr_Path1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Path1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Path1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_Factor_OrExpr_Path1.Value.(*predicate), AndExpr_Factor_OrExpr3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Path1
			_ = OR2
			_ = AndExpr_Factor_OrExpr3
		case 20:
			OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Path1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_Factor_OrExpr_Path3 := rhs[2]

			OrExpr0.Child = AndExpr_Factor_OrExpr_Path1
			AndExpr_Factor_OrExpr_Path1.Next = OR2
			OR2.Next = AndExpr_Factor_OrExpr_Path3
			OrExpr0.LastChild = AndExpr_Factor_OrExpr_Path3

			{
				switch AndExpr_Factor_OrExpr_Path1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Path1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Path1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Path3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Path3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Path3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_Factor_OrExpr_Path1.Value.(*predicate), AndExpr_Factor_OrExpr_Path3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Path1
			_ = OR2
			_ = AndExpr_Factor_OrExpr_Path3
		case 21:
			OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Path1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_Factor_OrExpr_Step3 := rhs[2]

			OrExpr0.Child = AndExpr_Factor_OrExpr_Path1
			AndExpr_Factor_OrExpr_Path1.Next = OR2
			OR2.Next = AndExpr_Factor_OrExpr_Step3
			OrExpr0.LastChild = AndExpr_Factor_OrExpr_Step3

			{
				switch AndExpr_Factor_OrExpr_Path1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Path1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Path1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Step3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_Factor_OrExpr_Path1.Value.(*predicate), AndExpr_Factor_OrExpr_Step3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Path1
			_ = OR2
			_ = AndExpr_Factor_OrExpr_Step3
		case 22:
			OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Path1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_Factor_OrExpr_Step_Test3 := rhs[2]

			OrExpr0.Child = AndExpr_Factor_OrExpr_Path1
			AndExpr_Factor_OrExpr_Path1.Next = OR2
			OR2.Next = AndExpr_Factor_OrExpr_Step_Test3
			OrExpr0.LastChild = AndExpr_Factor_OrExpr_Step_Test3

			{
				switch AndExpr_Factor_OrExpr_Path1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Path1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Path1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Step_Test3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step_Test3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step_Test3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_Factor_OrExpr_Path1.Value.(*predicate), AndExpr_Factor_OrExpr_Step_Test3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Path1
			_ = OR2
			_ = AndExpr_Factor_OrExpr_Step_Test3
		case 23:
			OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Path1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_OrExpr3 := rhs[2]

			OrExpr0.Child = AndExpr_Factor_OrExpr_Path1
			AndExpr_Factor_OrExpr_Path1.Next = OR2
			OR2.Next = AndExpr_OrExpr3
			OrExpr0.LastChild = AndExpr_OrExpr3

			{
				switch AndExpr_Factor_OrExpr_Path1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Path1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Path1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_OrExpr3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_OrExpr3.Value.(udpeTest), child)
					AndExpr_OrExpr3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_Factor_OrExpr_Path1.Value.(*predicate), AndExpr_OrExpr3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Path1
			_ = OR2
			_ = AndExpr_OrExpr3
		case 24:
			AndExpr_Factor_OrExpr_Path0 := lhs
			AndExpr_Factor_OrExpr_Path1 := rhs[0]
			PARENT2 := rhs[1]
			AndExpr_Factor_OrExpr_Step3 := rhs[2]

			AndExpr_Factor_OrExpr_Path0.Child = AndExpr_Factor_OrExpr_Path1
			AndExpr_Factor_OrExpr_Path1.Next = PARENT2
			PARENT2.Next = AndExpr_Factor_OrExpr_Step3
			AndExpr_Factor_OrExpr_Path0.LastChild = AndExpr_Factor_OrExpr_Step3

			{
				AndExpr_Factor_OrExpr_Path0.Value = appendStep(AndExpr_Factor_OrExpr_Path1.Value.(*peSemValue), AndExpr_Factor_OrExpr_Step3.Value.(udpeTest), parent)
			}
			_ = AndExpr_Factor_OrExpr_Path1
			_ = PARENT2
			_ = AndExpr_Factor_OrExpr_Step3
		case 25:
			AndExpr_Factor_OrExpr_Path0 := lhs
			AndExpr_Factor_OrExpr_Path1 := rhs[0]
			PARENT2 := rhs[1]
			AndExpr_Factor_OrExpr_Step_Test3 := rhs[2]

			AndExpr_Factor_OrExpr_Path0.Child = AndExpr_Factor_OrExpr_Path1
			AndExpr_Factor_OrExpr_Path1.Next = PARENT2
			PARENT2.Next = AndExpr_Factor_OrExpr_Step_Test3
			AndExpr_Factor_OrExpr_Path0.LastChild = AndExpr_Factor_OrExpr_Step_Test3

			{
				AndExpr_Factor_OrExpr_Path0.Value = appendStep(AndExpr_Factor_OrExpr_Path1.Value.(*peSemValue), AndExpr_Factor_OrExpr_Step_Test3.Value.(udpeTest), parent)
			}
			_ = AndExpr_Factor_OrExpr_Path1
			_ = PARENT2
			_ = AndExpr_Factor_OrExpr_Step_Test3
		case 26:
			AndExpr_OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Step1 := rhs[0]
			AND2 := rhs[1]
			AndExpr_Factor_OrExpr3 := rhs[2]

			AndExpr_OrExpr0.Child = AndExpr_Factor_OrExpr_Step1
			AndExpr_Factor_OrExpr_Step1.Next = AND2
			AND2.Next = AndExpr_Factor_OrExpr3
			AndExpr_OrExpr0.LastChild = AndExpr_Factor_OrExpr3

			{
				switch AndExpr_Factor_OrExpr_Step1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr3.Value = newAtom(pe.end())
				}
			
				AndExpr_OrExpr0.Value = combine(and(), AndExpr_Factor_OrExpr_Step1.Value.(*predicate), AndExpr_Factor_OrExpr3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Step1
			_ = AND2
			_ = AndExpr_Factor_OrExpr3
		case 27:
			AndExpr_OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Step1 := rhs[0]
			AND2 := rhs[1]
			AndExpr_Factor_OrExpr_Path3 := rhs[2]

			AndExpr_OrExpr0.Child = AndExpr_Factor_OrExpr_Step1
			AndExpr_Factor_OrExpr_Step1.Next = AND2
			AND2.Next = AndExpr_Factor_OrExpr_Path3
			AndExpr_OrExpr0.LastChild = AndExpr_Factor_OrExpr_Path3

			{
				switch AndExpr_Factor_OrExpr_Step1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Path3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Path3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Path3.Value = newAtom(pe.end())
				}
			
				AndExpr_OrExpr0.Value = combine(and(), AndExpr_Factor_OrExpr_Step1.Value.(*predicate), AndExpr_Factor_OrExpr_Path3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Step1
			_ = AND2
			_ = AndExpr_Factor_OrExpr_Path3
		case 28:
			AndExpr_OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Step1 := rhs[0]
			AND2 := rhs[1]
			AndExpr_Factor_OrExpr_Step3 := rhs[2]

			AndExpr_OrExpr0.Child = AndExpr_Factor_OrExpr_Step1
			AndExpr_Factor_OrExpr_Step1.Next = AND2
			AND2.Next = AndExpr_Factor_OrExpr_Step3
			AndExpr_OrExpr0.LastChild = AndExpr_Factor_OrExpr_Step3

			{
				switch AndExpr_Factor_OrExpr_Step1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Step3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step3.Value = newAtom(pe.end())
				}
			
				AndExpr_OrExpr0.Value = combine(and(), AndExpr_Factor_OrExpr_Step1.Value.(*predicate), AndExpr_Factor_OrExpr_Step3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Step1
			_ = AND2
			_ = AndExpr_Factor_OrExpr_Step3
		case 29:
			AndExpr_OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Step1 := rhs[0]
			AND2 := rhs[1]
			AndExpr_Factor_OrExpr_Step_Test3 := rhs[2]

			AndExpr_OrExpr0.Child = AndExpr_Factor_OrExpr_Step1
			AndExpr_Factor_OrExpr_Step1.Next = AND2
			AND2.Next = AndExpr_Factor_OrExpr_Step_Test3
			AndExpr_OrExpr0.LastChild = AndExpr_Factor_OrExpr_Step_Test3

			{
				switch AndExpr_Factor_OrExpr_Step1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Step_Test3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step_Test3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step_Test3.Value = newAtom(pe.end())
				}
			
				AndExpr_OrExpr0.Value = combine(and(), AndExpr_Factor_OrExpr_Step1.Value.(*predicate), AndExpr_Factor_OrExpr_Step_Test3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Step1
			_ = AND2
			_ = AndExpr_Factor_OrExpr_Step_Test3
		case 30:
			OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Step1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_Factor_OrExpr3 := rhs[2]

			OrExpr0.Child = AndExpr_Factor_OrExpr_Step1
			AndExpr_Factor_OrExpr_Step1.Next = OR2
			OR2.Next = AndExpr_Factor_OrExpr3
			OrExpr0.LastChild = AndExpr_Factor_OrExpr3

			{
				switch AndExpr_Factor_OrExpr_Step1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_Factor_OrExpr_Step1.Value.(*predicate), AndExpr_Factor_OrExpr3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Step1
			_ = OR2
			_ = AndExpr_Factor_OrExpr3
		case 31:
			OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Step1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_Factor_OrExpr_Path3 := rhs[2]

			OrExpr0.Child = AndExpr_Factor_OrExpr_Step1
			AndExpr_Factor_OrExpr_Step1.Next = OR2
			OR2.Next = AndExpr_Factor_OrExpr_Path3
			OrExpr0.LastChild = AndExpr_Factor_OrExpr_Path3

			{
				switch AndExpr_Factor_OrExpr_Step1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Path3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Path3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Path3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_Factor_OrExpr_Step1.Value.(*predicate), AndExpr_Factor_OrExpr_Path3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Step1
			_ = OR2
			_ = AndExpr_Factor_OrExpr_Path3
		case 32:
			OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Step1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_Factor_OrExpr_Step3 := rhs[2]

			OrExpr0.Child = AndExpr_Factor_OrExpr_Step1
			AndExpr_Factor_OrExpr_Step1.Next = OR2
			OR2.Next = AndExpr_Factor_OrExpr_Step3
			OrExpr0.LastChild = AndExpr_Factor_OrExpr_Step3

			{
				switch AndExpr_Factor_OrExpr_Step1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Step3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_Factor_OrExpr_Step1.Value.(*predicate), AndExpr_Factor_OrExpr_Step3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Step1
			_ = OR2
			_ = AndExpr_Factor_OrExpr_Step3
		case 33:
			OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Step1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_Factor_OrExpr_Step_Test3 := rhs[2]

			OrExpr0.Child = AndExpr_Factor_OrExpr_Step1
			AndExpr_Factor_OrExpr_Step1.Next = OR2
			OR2.Next = AndExpr_Factor_OrExpr_Step_Test3
			OrExpr0.LastChild = AndExpr_Factor_OrExpr_Step_Test3

			{
				switch AndExpr_Factor_OrExpr_Step1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Step_Test3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step_Test3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step_Test3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_Factor_OrExpr_Step1.Value.(*predicate), AndExpr_Factor_OrExpr_Step_Test3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Step1
			_ = OR2
			_ = AndExpr_Factor_OrExpr_Step_Test3
		case 34:
			OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Step1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_OrExpr3 := rhs[2]

			OrExpr0.Child = AndExpr_Factor_OrExpr_Step1
			AndExpr_Factor_OrExpr_Step1.Next = OR2
			OR2.Next = AndExpr_OrExpr3
			OrExpr0.LastChild = AndExpr_OrExpr3

			{
				switch AndExpr_Factor_OrExpr_Step1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_OrExpr3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_OrExpr3.Value.(udpeTest), child)
					AndExpr_OrExpr3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_Factor_OrExpr_Step1.Value.(*predicate), AndExpr_OrExpr3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Step1
			_ = OR2
			_ = AndExpr_OrExpr3
		case 35:
			AndExpr_OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Step_Test1 := rhs[0]
			AND2 := rhs[1]
			AndExpr_Factor_OrExpr3 := rhs[2]

			AndExpr_OrExpr0.Child = AndExpr_Factor_OrExpr_Step_Test1
			AndExpr_Factor_OrExpr_Step_Test1.Next = AND2
			AND2.Next = AndExpr_Factor_OrExpr3
			AndExpr_OrExpr0.LastChild = AndExpr_Factor_OrExpr3

			{
				switch AndExpr_Factor_OrExpr_Step_Test1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step_Test1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step_Test1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr3.Value = newAtom(pe.end())
				}
			
				AndExpr_OrExpr0.Value = combine(and(), AndExpr_Factor_OrExpr_Step_Test1.Value.(*predicate), AndExpr_Factor_OrExpr3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Step_Test1
			_ = AND2
			_ = AndExpr_Factor_OrExpr3
		case 36:
			AndExpr_OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Step_Test1 := rhs[0]
			AND2 := rhs[1]
			AndExpr_Factor_OrExpr_Path3 := rhs[2]

			AndExpr_OrExpr0.Child = AndExpr_Factor_OrExpr_Step_Test1
			AndExpr_Factor_OrExpr_Step_Test1.Next = AND2
			AND2.Next = AndExpr_Factor_OrExpr_Path3
			AndExpr_OrExpr0.LastChild = AndExpr_Factor_OrExpr_Path3

			{
				switch AndExpr_Factor_OrExpr_Step_Test1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step_Test1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step_Test1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Path3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Path3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Path3.Value = newAtom(pe.end())
				}
			
				AndExpr_OrExpr0.Value = combine(and(), AndExpr_Factor_OrExpr_Step_Test1.Value.(*predicate), AndExpr_Factor_OrExpr_Path3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Step_Test1
			_ = AND2
			_ = AndExpr_Factor_OrExpr_Path3
		case 37:
			AndExpr_OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Step_Test1 := rhs[0]
			AND2 := rhs[1]
			AndExpr_Factor_OrExpr_Step3 := rhs[2]

			AndExpr_OrExpr0.Child = AndExpr_Factor_OrExpr_Step_Test1
			AndExpr_Factor_OrExpr_Step_Test1.Next = AND2
			AND2.Next = AndExpr_Factor_OrExpr_Step3
			AndExpr_OrExpr0.LastChild = AndExpr_Factor_OrExpr_Step3

			{
				switch AndExpr_Factor_OrExpr_Step_Test1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step_Test1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step_Test1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Step3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step3.Value = newAtom(pe.end())
				}
			
				AndExpr_OrExpr0.Value = combine(and(), AndExpr_Factor_OrExpr_Step_Test1.Value.(*predicate), AndExpr_Factor_OrExpr_Step3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Step_Test1
			_ = AND2
			_ = AndExpr_Factor_OrExpr_Step3
		case 38:
			AndExpr_OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Step_Test1 := rhs[0]
			AND2 := rhs[1]
			AndExpr_Factor_OrExpr_Step_Test3 := rhs[2]

			AndExpr_OrExpr0.Child = AndExpr_Factor_OrExpr_Step_Test1
			AndExpr_Factor_OrExpr_Step_Test1.Next = AND2
			AND2.Next = AndExpr_Factor_OrExpr_Step_Test3
			AndExpr_OrExpr0.LastChild = AndExpr_Factor_OrExpr_Step_Test3

			{
				switch AndExpr_Factor_OrExpr_Step_Test1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step_Test1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step_Test1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Step_Test3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step_Test3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step_Test3.Value = newAtom(pe.end())
				}
			
				AndExpr_OrExpr0.Value = combine(and(), AndExpr_Factor_OrExpr_Step_Test1.Value.(*predicate), AndExpr_Factor_OrExpr_Step_Test3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Step_Test1
			_ = AND2
			_ = AndExpr_Factor_OrExpr_Step_Test3
		case 39:
			AndExpr_Factor_OrExpr_Step0 := lhs
			AndExpr_Factor_OrExpr_Step_Test1 := rhs[0]
			LBR2 := rhs[1]
			AndExpr_Factor_OrExpr3 := rhs[2]
			RBR4 := rhs[3]

			AndExpr_Factor_OrExpr_Step0.Child = AndExpr_Factor_OrExpr_Step_Test1
			AndExpr_Factor_OrExpr_Step_Test1.Next = LBR2
			LBR2.Next = AndExpr_Factor_OrExpr3
			AndExpr_Factor_OrExpr3.Next = RBR4
			AndExpr_Factor_OrExpr_Step0.LastChild = RBR4

			{
				// TODO(vvihorev): support NUDPEs inside predicates
				switch AndExpr_Factor_OrExpr_Step_Test1.Value.(type) {
				case *elementTest:
			
					// handle renaming chain OrExpr -> AndExpr -> Factor -> Step
					switch AndExpr_Factor_OrExpr3.Value.(type) {
					case *elementTest:
			            // we must be getting an attribute test
						pe := appendStep(nil, AndExpr_Factor_OrExpr3.Value.(udpeTest), child)
						AndExpr_Factor_OrExpr3.Value = newAtom(pe.end())
					case *peSemValue:
			            // we must be getting an NUDPE inside the predicate
						AndExpr_Factor_OrExpr3.Value = newAtom(AndExpr_Factor_OrExpr3.Value.(*peSemValue).end())
					}
			
					AndExpr_Factor_OrExpr_Step_Test1.Value.(*elementTest).pred = AndExpr_Factor_OrExpr3.Value.(*predicate)
				case *textTest:
					AndExpr_Factor_OrExpr_Step_Test1.Value.(*elementTest).pred = nil
				default:
					panic("unknown test type")
				}
				AndExpr_Factor_OrExpr_Step0.Value = AndExpr_Factor_OrExpr_Step_Test1.Value
			}
			_ = AndExpr_Factor_OrExpr_Step_Test1
			_ = LBR2
			_ = AndExpr_Factor_OrExpr3
			_ = RBR4
		case 40:
			AndExpr_Factor_OrExpr_Step0 := lhs
			AndExpr_Factor_OrExpr_Step_Test1 := rhs[0]
			LBR2 := rhs[1]
			AndExpr_Factor_OrExpr_Path3 := rhs[2]
			RBR4 := rhs[3]

			AndExpr_Factor_OrExpr_Step0.Child = AndExpr_Factor_OrExpr_Step_Test1
			AndExpr_Factor_OrExpr_Step_Test1.Next = LBR2
			LBR2.Next = AndExpr_Factor_OrExpr_Path3
			AndExpr_Factor_OrExpr_Path3.Next = RBR4
			AndExpr_Factor_OrExpr_Step0.LastChild = RBR4

			{
				// TODO(vvihorev): support NUDPEs inside predicates
				switch AndExpr_Factor_OrExpr_Step_Test1.Value.(type) {
				case *elementTest:
			
					// handle renaming chain OrExpr -> AndExpr -> Factor -> Step
					switch AndExpr_Factor_OrExpr_Path3.Value.(type) {
					case *elementTest:
			            // we must be getting an attribute test
						pe := appendStep(nil, AndExpr_Factor_OrExpr_Path3.Value.(udpeTest), child)
						AndExpr_Factor_OrExpr_Path3.Value = newAtom(pe.end())
					case *peSemValue:
			            // we must be getting an NUDPE inside the predicate
						AndExpr_Factor_OrExpr_Path3.Value = newAtom(AndExpr_Factor_OrExpr_Path3.Value.(*peSemValue).end())
					}
			
					AndExpr_Factor_OrExpr_Step_Test1.Value.(*elementTest).pred = AndExpr_Factor_OrExpr_Path3.Value.(*predicate)
				case *textTest:
					AndExpr_Factor_OrExpr_Step_Test1.Value.(*elementTest).pred = nil
				default:
					panic("unknown test type")
				}
				AndExpr_Factor_OrExpr_Step0.Value = AndExpr_Factor_OrExpr_Step_Test1.Value
			}
			_ = AndExpr_Factor_OrExpr_Step_Test1
			_ = LBR2
			_ = AndExpr_Factor_OrExpr_Path3
			_ = RBR4
		case 41:
			AndExpr_Factor_OrExpr_Step0 := lhs
			AndExpr_Factor_OrExpr_Step_Test1 := rhs[0]
			LBR2 := rhs[1]
			AndExpr_Factor_OrExpr_Step3 := rhs[2]
			RBR4 := rhs[3]

			AndExpr_Factor_OrExpr_Step0.Child = AndExpr_Factor_OrExpr_Step_Test1
			AndExpr_Factor_OrExpr_Step_Test1.Next = LBR2
			LBR2.Next = AndExpr_Factor_OrExpr_Step3
			AndExpr_Factor_OrExpr_Step3.Next = RBR4
			AndExpr_Factor_OrExpr_Step0.LastChild = RBR4

			{
				// TODO(vvihorev): support NUDPEs inside predicates
				switch AndExpr_Factor_OrExpr_Step_Test1.Value.(type) {
				case *elementTest:
			
					// handle renaming chain OrExpr -> AndExpr -> Factor -> Step
					switch AndExpr_Factor_OrExpr_Step3.Value.(type) {
					case *elementTest:
			            // we must be getting an attribute test
						pe := appendStep(nil, AndExpr_Factor_OrExpr_Step3.Value.(udpeTest), child)
						AndExpr_Factor_OrExpr_Step3.Value = newAtom(pe.end())
					case *peSemValue:
			            // we must be getting an NUDPE inside the predicate
						AndExpr_Factor_OrExpr_Step3.Value = newAtom(AndExpr_Factor_OrExpr_Step3.Value.(*peSemValue).end())
					}
			
					AndExpr_Factor_OrExpr_Step_Test1.Value.(*elementTest).pred = AndExpr_Factor_OrExpr_Step3.Value.(*predicate)
				case *textTest:
					AndExpr_Factor_OrExpr_Step_Test1.Value.(*elementTest).pred = nil
				default:
					panic("unknown test type")
				}
				AndExpr_Factor_OrExpr_Step0.Value = AndExpr_Factor_OrExpr_Step_Test1.Value
			}
			_ = AndExpr_Factor_OrExpr_Step_Test1
			_ = LBR2
			_ = AndExpr_Factor_OrExpr_Step3
			_ = RBR4
		case 42:
			AndExpr_Factor_OrExpr_Step0 := lhs
			AndExpr_Factor_OrExpr_Step_Test1 := rhs[0]
			LBR2 := rhs[1]
			AndExpr_Factor_OrExpr_Step_Test3 := rhs[2]
			RBR4 := rhs[3]

			AndExpr_Factor_OrExpr_Step0.Child = AndExpr_Factor_OrExpr_Step_Test1
			AndExpr_Factor_OrExpr_Step_Test1.Next = LBR2
			LBR2.Next = AndExpr_Factor_OrExpr_Step_Test3
			AndExpr_Factor_OrExpr_Step_Test3.Next = RBR4
			AndExpr_Factor_OrExpr_Step0.LastChild = RBR4

			{
				// TODO(vvihorev): support NUDPEs inside predicates
				switch AndExpr_Factor_OrExpr_Step_Test1.Value.(type) {
				case *elementTest:
			
					// handle renaming chain OrExpr -> AndExpr -> Factor -> Step
					switch AndExpr_Factor_OrExpr_Step_Test3.Value.(type) {
					case *elementTest:
			            // we must be getting an attribute test
						pe := appendStep(nil, AndExpr_Factor_OrExpr_Step_Test3.Value.(udpeTest), child)
						AndExpr_Factor_OrExpr_Step_Test3.Value = newAtom(pe.end())
					case *peSemValue:
			            // we must be getting an NUDPE inside the predicate
						AndExpr_Factor_OrExpr_Step_Test3.Value = newAtom(AndExpr_Factor_OrExpr_Step_Test3.Value.(*peSemValue).end())
					}
			
					AndExpr_Factor_OrExpr_Step_Test1.Value.(*elementTest).pred = AndExpr_Factor_OrExpr_Step_Test3.Value.(*predicate)
				case *textTest:
					AndExpr_Factor_OrExpr_Step_Test1.Value.(*elementTest).pred = nil
				default:
					panic("unknown test type")
				}
				AndExpr_Factor_OrExpr_Step0.Value = AndExpr_Factor_OrExpr_Step_Test1.Value
			}
			_ = AndExpr_Factor_OrExpr_Step_Test1
			_ = LBR2
			_ = AndExpr_Factor_OrExpr_Step_Test3
			_ = RBR4
		case 43:
			AndExpr_Factor_OrExpr_Step0 := lhs
			AndExpr_Factor_OrExpr_Step_Test1 := rhs[0]
			LBR2 := rhs[1]
			AndExpr_OrExpr3 := rhs[2]
			RBR4 := rhs[3]

			AndExpr_Factor_OrExpr_Step0.Child = AndExpr_Factor_OrExpr_Step_Test1
			AndExpr_Factor_OrExpr_Step_Test1.Next = LBR2
			LBR2.Next = AndExpr_OrExpr3
			AndExpr_OrExpr3.Next = RBR4
			AndExpr_Factor_OrExpr_Step0.LastChild = RBR4

			{
				// TODO(vvihorev): support NUDPEs inside predicates
				switch AndExpr_Factor_OrExpr_Step_Test1.Value.(type) {
				case *elementTest:
			
					// handle renaming chain OrExpr -> AndExpr -> Factor -> Step
					switch AndExpr_OrExpr3.Value.(type) {
					case *elementTest:
			            // we must be getting an attribute test
						pe := appendStep(nil, AndExpr_OrExpr3.Value.(udpeTest), child)
						AndExpr_OrExpr3.Value = newAtom(pe.end())
					case *peSemValue:
			            // we must be getting an NUDPE inside the predicate
						AndExpr_OrExpr3.Value = newAtom(AndExpr_OrExpr3.Value.(*peSemValue).end())
					}
			
					AndExpr_Factor_OrExpr_Step_Test1.Value.(*elementTest).pred = AndExpr_OrExpr3.Value.(*predicate)
				case *textTest:
					AndExpr_Factor_OrExpr_Step_Test1.Value.(*elementTest).pred = nil
				default:
					panic("unknown test type")
				}
				AndExpr_Factor_OrExpr_Step0.Value = AndExpr_Factor_OrExpr_Step_Test1.Value
			}
			_ = AndExpr_Factor_OrExpr_Step_Test1
			_ = LBR2
			_ = AndExpr_OrExpr3
			_ = RBR4
		case 44:
			AndExpr_Factor_OrExpr_Step0 := lhs
			AndExpr_Factor_OrExpr_Step_Test1 := rhs[0]
			LBR2 := rhs[1]
			OrExpr3 := rhs[2]
			RBR4 := rhs[3]

			AndExpr_Factor_OrExpr_Step0.Child = AndExpr_Factor_OrExpr_Step_Test1
			AndExpr_Factor_OrExpr_Step_Test1.Next = LBR2
			LBR2.Next = OrExpr3
			OrExpr3.Next = RBR4
			AndExpr_Factor_OrExpr_Step0.LastChild = RBR4

			{
				// TODO(vvihorev): support NUDPEs inside predicates
				switch AndExpr_Factor_OrExpr_Step_Test1.Value.(type) {
				case *elementTest:
			
					// handle renaming chain OrExpr -> AndExpr -> Factor -> Step
					switch OrExpr3.Value.(type) {
					case *elementTest:
			            // we must be getting an attribute test
						pe := appendStep(nil, OrExpr3.Value.(udpeTest), child)
						OrExpr3.Value = newAtom(pe.end())
					case *peSemValue:
			            // we must be getting an NUDPE inside the predicate
						OrExpr3.Value = newAtom(OrExpr3.Value.(*peSemValue).end())
					}
			
					AndExpr_Factor_OrExpr_Step_Test1.Value.(*elementTest).pred = OrExpr3.Value.(*predicate)
				case *textTest:
					AndExpr_Factor_OrExpr_Step_Test1.Value.(*elementTest).pred = nil
				default:
					panic("unknown test type")
				}
				AndExpr_Factor_OrExpr_Step0.Value = AndExpr_Factor_OrExpr_Step_Test1.Value
			}
			_ = AndExpr_Factor_OrExpr_Step_Test1
			_ = LBR2
			_ = OrExpr3
			_ = RBR4
		case 45:
			OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Step_Test1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_Factor_OrExpr3 := rhs[2]

			OrExpr0.Child = AndExpr_Factor_OrExpr_Step_Test1
			AndExpr_Factor_OrExpr_Step_Test1.Next = OR2
			OR2.Next = AndExpr_Factor_OrExpr3
			OrExpr0.LastChild = AndExpr_Factor_OrExpr3

			{
				switch AndExpr_Factor_OrExpr_Step_Test1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step_Test1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step_Test1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_Factor_OrExpr_Step_Test1.Value.(*predicate), AndExpr_Factor_OrExpr3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Step_Test1
			_ = OR2
			_ = AndExpr_Factor_OrExpr3
		case 46:
			OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Step_Test1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_Factor_OrExpr_Path3 := rhs[2]

			OrExpr0.Child = AndExpr_Factor_OrExpr_Step_Test1
			AndExpr_Factor_OrExpr_Step_Test1.Next = OR2
			OR2.Next = AndExpr_Factor_OrExpr_Path3
			OrExpr0.LastChild = AndExpr_Factor_OrExpr_Path3

			{
				switch AndExpr_Factor_OrExpr_Step_Test1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step_Test1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step_Test1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Path3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Path3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Path3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_Factor_OrExpr_Step_Test1.Value.(*predicate), AndExpr_Factor_OrExpr_Path3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Step_Test1
			_ = OR2
			_ = AndExpr_Factor_OrExpr_Path3
		case 47:
			OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Step_Test1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_Factor_OrExpr_Step3 := rhs[2]

			OrExpr0.Child = AndExpr_Factor_OrExpr_Step_Test1
			AndExpr_Factor_OrExpr_Step_Test1.Next = OR2
			OR2.Next = AndExpr_Factor_OrExpr_Step3
			OrExpr0.LastChild = AndExpr_Factor_OrExpr_Step3

			{
				switch AndExpr_Factor_OrExpr_Step_Test1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step_Test1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step_Test1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Step3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_Factor_OrExpr_Step_Test1.Value.(*predicate), AndExpr_Factor_OrExpr_Step3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Step_Test1
			_ = OR2
			_ = AndExpr_Factor_OrExpr_Step3
		case 48:
			OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Step_Test1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_Factor_OrExpr_Step_Test3 := rhs[2]

			OrExpr0.Child = AndExpr_Factor_OrExpr_Step_Test1
			AndExpr_Factor_OrExpr_Step_Test1.Next = OR2
			OR2.Next = AndExpr_Factor_OrExpr_Step_Test3
			OrExpr0.LastChild = AndExpr_Factor_OrExpr_Step_Test3

			{
				switch AndExpr_Factor_OrExpr_Step_Test1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step_Test1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step_Test1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Step_Test3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step_Test3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step_Test3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_Factor_OrExpr_Step_Test1.Value.(*predicate), AndExpr_Factor_OrExpr_Step_Test3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Step_Test1
			_ = OR2
			_ = AndExpr_Factor_OrExpr_Step_Test3
		case 49:
			OrExpr0 := lhs
			AndExpr_Factor_OrExpr_Step_Test1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_OrExpr3 := rhs[2]

			OrExpr0.Child = AndExpr_Factor_OrExpr_Step_Test1
			AndExpr_Factor_OrExpr_Step_Test1.Next = OR2
			OR2.Next = AndExpr_OrExpr3
			OrExpr0.LastChild = AndExpr_OrExpr3

			{
				switch AndExpr_Factor_OrExpr_Step_Test1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step_Test1.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step_Test1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_OrExpr3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_OrExpr3.Value.(udpeTest), child)
					AndExpr_OrExpr3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_Factor_OrExpr_Step_Test1.Value.(*predicate), AndExpr_OrExpr3.Value.(*predicate))
			}
			_ = AndExpr_Factor_OrExpr_Step_Test1
			_ = OR2
			_ = AndExpr_OrExpr3
		case 50:
			OrExpr0 := lhs
			AndExpr_OrExpr1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_Factor_OrExpr3 := rhs[2]

			OrExpr0.Child = AndExpr_OrExpr1
			AndExpr_OrExpr1.Next = OR2
			OR2.Next = AndExpr_Factor_OrExpr3
			OrExpr0.LastChild = AndExpr_Factor_OrExpr3

			{
				switch AndExpr_OrExpr1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_OrExpr1.Value.(udpeTest), child)
					AndExpr_OrExpr1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_OrExpr1.Value.(*predicate), AndExpr_Factor_OrExpr3.Value.(*predicate))
			}
			_ = AndExpr_OrExpr1
			_ = OR2
			_ = AndExpr_Factor_OrExpr3
		case 51:
			OrExpr0 := lhs
			AndExpr_OrExpr1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_Factor_OrExpr_Path3 := rhs[2]

			OrExpr0.Child = AndExpr_OrExpr1
			AndExpr_OrExpr1.Next = OR2
			OR2.Next = AndExpr_Factor_OrExpr_Path3
			OrExpr0.LastChild = AndExpr_Factor_OrExpr_Path3

			{
				switch AndExpr_OrExpr1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_OrExpr1.Value.(udpeTest), child)
					AndExpr_OrExpr1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Path3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Path3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Path3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_OrExpr1.Value.(*predicate), AndExpr_Factor_OrExpr_Path3.Value.(*predicate))
			}
			_ = AndExpr_OrExpr1
			_ = OR2
			_ = AndExpr_Factor_OrExpr_Path3
		case 52:
			OrExpr0 := lhs
			AndExpr_OrExpr1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_Factor_OrExpr_Step3 := rhs[2]

			OrExpr0.Child = AndExpr_OrExpr1
			AndExpr_OrExpr1.Next = OR2
			OR2.Next = AndExpr_Factor_OrExpr_Step3
			OrExpr0.LastChild = AndExpr_Factor_OrExpr_Step3

			{
				switch AndExpr_OrExpr1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_OrExpr1.Value.(udpeTest), child)
					AndExpr_OrExpr1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Step3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_OrExpr1.Value.(*predicate), AndExpr_Factor_OrExpr_Step3.Value.(*predicate))
			}
			_ = AndExpr_OrExpr1
			_ = OR2
			_ = AndExpr_Factor_OrExpr_Step3
		case 53:
			OrExpr0 := lhs
			AndExpr_OrExpr1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_Factor_OrExpr_Step_Test3 := rhs[2]

			OrExpr0.Child = AndExpr_OrExpr1
			AndExpr_OrExpr1.Next = OR2
			OR2.Next = AndExpr_Factor_OrExpr_Step_Test3
			OrExpr0.LastChild = AndExpr_Factor_OrExpr_Step_Test3

			{
				switch AndExpr_OrExpr1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_OrExpr1.Value.(udpeTest), child)
					AndExpr_OrExpr1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_Factor_OrExpr_Step_Test3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_Factor_OrExpr_Step_Test3.Value.(udpeTest), child)
					AndExpr_Factor_OrExpr_Step_Test3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_OrExpr1.Value.(*predicate), AndExpr_Factor_OrExpr_Step_Test3.Value.(*predicate))
			}
			_ = AndExpr_OrExpr1
			_ = OR2
			_ = AndExpr_Factor_OrExpr_Step_Test3
		case 54:
			OrExpr0 := lhs
			AndExpr_OrExpr1 := rhs[0]
			OR2 := rhs[1]
			AndExpr_OrExpr3 := rhs[2]

			OrExpr0.Child = AndExpr_OrExpr1
			AndExpr_OrExpr1.Next = OR2
			OR2.Next = AndExpr_OrExpr3
			OrExpr0.LastChild = AndExpr_OrExpr3

			{
				switch AndExpr_OrExpr1.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_OrExpr1.Value.(udpeTest), child)
					AndExpr_OrExpr1.Value = newAtom(pe.end())
				}
			
				switch AndExpr_OrExpr3.Value.(type) {
				case *elementTest:
					pe := appendStep(nil, AndExpr_OrExpr3.Value.(udpeTest), child)
					AndExpr_OrExpr3.Value = newAtom(pe.end())
				}
			
				OrExpr0.Value = combine(or(), AndExpr_OrExpr1.Value.(*predicate), AndExpr_OrExpr3.Value.(*predicate))
			}
			_ = AndExpr_OrExpr1
			_ = OR2
			_ = AndExpr_OrExpr3
		case 55:
			AndExpr_Factor_OrExpr_Path0 := lhs
			ANCESTOR1 := rhs[0]
			AndExpr_Factor_OrExpr_Step2 := rhs[1]

			AndExpr_Factor_OrExpr_Path0.Child = ANCESTOR1
			ANCESTOR1.Next = AndExpr_Factor_OrExpr_Step2
			AndExpr_Factor_OrExpr_Path0.LastChild = AndExpr_Factor_OrExpr_Step2

			{
				AndExpr_Factor_OrExpr_Path0.Value = appendStep(nil, AndExpr_Factor_OrExpr_Step2.Value.(udpeTest), ancestorOrSelf)
			}
			_ = ANCESTOR1
			_ = AndExpr_Factor_OrExpr_Step2
		case 56:
			AndExpr_Factor_OrExpr_Path0 := lhs
			ANCESTOR1 := rhs[0]
			AndExpr_Factor_OrExpr_Step_Test2 := rhs[1]

			AndExpr_Factor_OrExpr_Path0.Child = ANCESTOR1
			ANCESTOR1.Next = AndExpr_Factor_OrExpr_Step_Test2
			AndExpr_Factor_OrExpr_Path0.LastChild = AndExpr_Factor_OrExpr_Step_Test2

			{
				AndExpr_Factor_OrExpr_Path0.Value = appendStep(nil, AndExpr_Factor_OrExpr_Step_Test2.Value.(udpeTest), ancestorOrSelf)
			}
			_ = ANCESTOR1
			_ = AndExpr_Factor_OrExpr_Step_Test2
		case 57:
			AndExpr_Factor_OrExpr_Step_Test0 := lhs
			AT1 := rhs[0]
			IDENT2 := rhs[1]

			AndExpr_Factor_OrExpr_Step_Test0.Child = AT1
			AT1.Next = IDENT2
			AndExpr_Factor_OrExpr_Step_Test0.LastChild = IDENT2

			{
				AndExpr_Factor_OrExpr_Step_Test0.Value = newElementTest("*", &Attribute{Key: IDENT2.Value.(string)}, nil)
			}
			_ = AT1
			_ = IDENT2
		case 58:
			AndExpr_Factor_OrExpr_Step_Test0 := lhs
			AT1 := rhs[0]
			IDENT2 := rhs[1]
			EQ3 := rhs[2]
			STRING4 := rhs[3]

			AndExpr_Factor_OrExpr_Step_Test0.Child = AT1
			AT1.Next = IDENT2
			IDENT2.Next = EQ3
			EQ3.Next = STRING4
			AndExpr_Factor_OrExpr_Step_Test0.LastChild = STRING4

			{
				AndExpr_Factor_OrExpr_Step_Test0.Value = newElementTest("*", &Attribute{Key: IDENT2.Value.(string), Value: STRING4.Value.(string)}, nil)
			}
			_ = AT1
			_ = IDENT2
			_ = EQ3
			_ = STRING4
		case 59:
			AndExpr_Factor_OrExpr_Path0 := lhs
			CHILD1 := rhs[0]
			AndExpr_Factor_OrExpr_Step2 := rhs[1]

			AndExpr_Factor_OrExpr_Path0.Child = CHILD1
			CHILD1.Next = AndExpr_Factor_OrExpr_Step2
			AndExpr_Factor_OrExpr_Path0.LastChild = AndExpr_Factor_OrExpr_Step2

			{
				AndExpr_Factor_OrExpr_Path0.Value = appendStep(nil, AndExpr_Factor_OrExpr_Step2.Value.(udpeTest), child)
			}
			_ = CHILD1
			_ = AndExpr_Factor_OrExpr_Step2
		case 60:
			AndExpr_Factor_OrExpr_Path0 := lhs
			CHILD1 := rhs[0]
			AndExpr_Factor_OrExpr_Step_Test2 := rhs[1]

			AndExpr_Factor_OrExpr_Path0.Child = CHILD1
			CHILD1.Next = AndExpr_Factor_OrExpr_Step_Test2
			AndExpr_Factor_OrExpr_Path0.LastChild = AndExpr_Factor_OrExpr_Step_Test2

			{
				AndExpr_Factor_OrExpr_Path0.Value = appendStep(nil, AndExpr_Factor_OrExpr_Step_Test2.Value.(udpeTest), child)
			}
			_ = CHILD1
			_ = AndExpr_Factor_OrExpr_Step_Test2
		case 61:
			AndExpr_Factor_OrExpr_Path0 := lhs
			DESCENDANT1 := rhs[0]
			AndExpr_Factor_OrExpr_Step2 := rhs[1]

			AndExpr_Factor_OrExpr_Path0.Child = DESCENDANT1
			DESCENDANT1.Next = AndExpr_Factor_OrExpr_Step2
			AndExpr_Factor_OrExpr_Path0.LastChild = AndExpr_Factor_OrExpr_Step2

			{
				AndExpr_Factor_OrExpr_Path0.Value = appendStep(nil, AndExpr_Factor_OrExpr_Step2.Value.(udpeTest), descendantOrSelf)
			}
			_ = DESCENDANT1
			_ = AndExpr_Factor_OrExpr_Step2
		case 62:
			AndExpr_Factor_OrExpr_Path0 := lhs
			DESCENDANT1 := rhs[0]
			AndExpr_Factor_OrExpr_Step_Test2 := rhs[1]

			AndExpr_Factor_OrExpr_Path0.Child = DESCENDANT1
			DESCENDANT1.Next = AndExpr_Factor_OrExpr_Step_Test2
			AndExpr_Factor_OrExpr_Path0.LastChild = AndExpr_Factor_OrExpr_Step_Test2

			{
				AndExpr_Factor_OrExpr_Path0.Value = appendStep(nil, AndExpr_Factor_OrExpr_Step_Test2.Value.(udpeTest), descendantOrSelf)
			}
			_ = DESCENDANT1
			_ = AndExpr_Factor_OrExpr_Step_Test2
		case 63:
			AndExpr_Factor_OrExpr_Step_Test0 := lhs
			IDENT1 := rhs[0]

			AndExpr_Factor_OrExpr_Step_Test0.Child = IDENT1
			AndExpr_Factor_OrExpr_Step_Test0.LastChild = IDENT1

			{
				AndExpr_Factor_OrExpr_Step_Test0.Value = newElementTest(IDENT1.Value.(string), nil, nil)
			}
			_ = IDENT1
		case 64:
			AndExpr_Factor_OrExpr0 := lhs
			LPAR1 := rhs[0]
			AndExpr_Factor_OrExpr2 := rhs[1]
			RPAR3 := rhs[2]

			AndExpr_Factor_OrExpr0.Child = LPAR1
			LPAR1.Next = AndExpr_Factor_OrExpr2
			AndExpr_Factor_OrExpr2.Next = RPAR3
			AndExpr_Factor_OrExpr0.LastChild = RPAR3

			{
				AndExpr_Factor_OrExpr0.Value = AndExpr_Factor_OrExpr2.Value
			}
			_ = LPAR1
			_ = AndExpr_Factor_OrExpr2
			_ = RPAR3
		case 65:
			AndExpr_Factor_OrExpr0 := lhs
			LPAR1 := rhs[0]
			AndExpr_Factor_OrExpr_Path2 := rhs[1]
			RPAR3 := rhs[2]

			AndExpr_Factor_OrExpr0.Child = LPAR1
			LPAR1.Next = AndExpr_Factor_OrExpr_Path2
			AndExpr_Factor_OrExpr_Path2.Next = RPAR3
			AndExpr_Factor_OrExpr0.LastChild = RPAR3

			{
				AndExpr_Factor_OrExpr0.Value = AndExpr_Factor_OrExpr_Path2.Value
			}
			_ = LPAR1
			_ = AndExpr_Factor_OrExpr_Path2
			_ = RPAR3
		case 66:
			AndExpr_Factor_OrExpr0 := lhs
			LPAR1 := rhs[0]
			AndExpr_Factor_OrExpr_Step2 := rhs[1]
			RPAR3 := rhs[2]

			AndExpr_Factor_OrExpr0.Child = LPAR1
			LPAR1.Next = AndExpr_Factor_OrExpr_Step2
			AndExpr_Factor_OrExpr_Step2.Next = RPAR3
			AndExpr_Factor_OrExpr0.LastChild = RPAR3

			{
				AndExpr_Factor_OrExpr0.Value = AndExpr_Factor_OrExpr_Step2.Value
			}
			_ = LPAR1
			_ = AndExpr_Factor_OrExpr_Step2
			_ = RPAR3
		case 67:
			AndExpr_Factor_OrExpr0 := lhs
			LPAR1 := rhs[0]
			AndExpr_Factor_OrExpr_Step_Test2 := rhs[1]
			RPAR3 := rhs[2]

			AndExpr_Factor_OrExpr0.Child = LPAR1
			LPAR1.Next = AndExpr_Factor_OrExpr_Step_Test2
			AndExpr_Factor_OrExpr_Step_Test2.Next = RPAR3
			AndExpr_Factor_OrExpr0.LastChild = RPAR3

			{
				AndExpr_Factor_OrExpr0.Value = AndExpr_Factor_OrExpr_Step_Test2.Value
			}
			_ = LPAR1
			_ = AndExpr_Factor_OrExpr_Step_Test2
			_ = RPAR3
		case 68:
			AndExpr_Factor_OrExpr0 := lhs
			LPAR1 := rhs[0]
			AndExpr_OrExpr2 := rhs[1]
			RPAR3 := rhs[2]

			AndExpr_Factor_OrExpr0.Child = LPAR1
			LPAR1.Next = AndExpr_OrExpr2
			AndExpr_OrExpr2.Next = RPAR3
			AndExpr_Factor_OrExpr0.LastChild = RPAR3

			{
				AndExpr_Factor_OrExpr0.Value = AndExpr_OrExpr2.Value
			}
			_ = LPAR1
			_ = AndExpr_OrExpr2
			_ = RPAR3
		case 69:
			AndExpr_Factor_OrExpr0 := lhs
			LPAR1 := rhs[0]
			OrExpr2 := rhs[1]
			RPAR3 := rhs[2]

			AndExpr_Factor_OrExpr0.Child = LPAR1
			LPAR1.Next = OrExpr2
			OrExpr2.Next = RPAR3
			AndExpr_Factor_OrExpr0.LastChild = RPAR3

			{
				AndExpr_Factor_OrExpr0.Value = OrExpr2.Value
			}
			_ = LPAR1
			_ = OrExpr2
			_ = RPAR3
		case 70:
			AndExpr_Factor_OrExpr0 := lhs
			NOT1 := rhs[0]
			AndExpr_Factor_OrExpr_Path2 := rhs[1]

			AndExpr_Factor_OrExpr0.Child = NOT1
			NOT1.Next = AndExpr_Factor_OrExpr_Path2
			AndExpr_Factor_OrExpr0.LastChild = AndExpr_Factor_OrExpr_Path2

			{
				AndExpr_Factor_OrExpr0.Value = notNode(newAtom(AndExpr_Factor_OrExpr_Path2.Value.(peSemValue).end()))
			}
			_ = NOT1
			_ = AndExpr_Factor_OrExpr_Path2
		case 71:
			AndExpr_Factor_OrExpr0 := lhs
			NOT1 := rhs[0]
			AndExpr_Factor_OrExpr_Step2 := rhs[1]

			AndExpr_Factor_OrExpr0.Child = NOT1
			NOT1.Next = AndExpr_Factor_OrExpr_Step2
			AndExpr_Factor_OrExpr0.LastChild = AndExpr_Factor_OrExpr_Step2

			{
				step := appendStep(nil, AndExpr_Factor_OrExpr_Step2.Value.(udpeTest), child)
				AndExpr_Factor_OrExpr0.Value = notNode(newAtom(step.end()))
			}
			_ = NOT1
			_ = AndExpr_Factor_OrExpr_Step2
		case 72:
			AndExpr_Factor_OrExpr0 := lhs
			NOT1 := rhs[0]
			AndExpr_Factor_OrExpr_Step_Test2 := rhs[1]

			AndExpr_Factor_OrExpr0.Child = NOT1
			NOT1.Next = AndExpr_Factor_OrExpr_Step_Test2
			AndExpr_Factor_OrExpr0.LastChild = AndExpr_Factor_OrExpr_Step_Test2

			{
				step := appendStep(nil, AndExpr_Factor_OrExpr_Step_Test2.Value.(udpeTest), child)
				AndExpr_Factor_OrExpr0.Value = notNode(newAtom(step.end()))
			}
			_ = NOT1
			_ = AndExpr_Factor_OrExpr_Step_Test2
		case 73:
			AndExpr_Factor_OrExpr0 := lhs
			NOT1 := rhs[0]
			LPAR2 := rhs[1]
			AndExpr_Factor_OrExpr3 := rhs[2]
			RPAR4 := rhs[3]

			AndExpr_Factor_OrExpr0.Child = NOT1
			NOT1.Next = LPAR2
			LPAR2.Next = AndExpr_Factor_OrExpr3
			AndExpr_Factor_OrExpr3.Next = RPAR4
			AndExpr_Factor_OrExpr0.LastChild = RPAR4

			{
				AndExpr_Factor_OrExpr0.Value = notNode(AndExpr_Factor_OrExpr3.Value.(*predicate))
			}
			_ = NOT1
			_ = LPAR2
			_ = AndExpr_Factor_OrExpr3
			_ = RPAR4
		case 74:
			AndExpr_Factor_OrExpr0 := lhs
			NOT1 := rhs[0]
			LPAR2 := rhs[1]
			AndExpr_Factor_OrExpr_Path3 := rhs[2]
			RPAR4 := rhs[3]

			AndExpr_Factor_OrExpr0.Child = NOT1
			NOT1.Next = LPAR2
			LPAR2.Next = AndExpr_Factor_OrExpr_Path3
			AndExpr_Factor_OrExpr_Path3.Next = RPAR4
			AndExpr_Factor_OrExpr0.LastChild = RPAR4

			{
				AndExpr_Factor_OrExpr0.Value = notNode(AndExpr_Factor_OrExpr_Path3.Value.(*predicate))
			}
			_ = NOT1
			_ = LPAR2
			_ = AndExpr_Factor_OrExpr_Path3
			_ = RPAR4
		case 75:
			AndExpr_Factor_OrExpr0 := lhs
			NOT1 := rhs[0]
			LPAR2 := rhs[1]
			AndExpr_Factor_OrExpr_Step3 := rhs[2]
			RPAR4 := rhs[3]

			AndExpr_Factor_OrExpr0.Child = NOT1
			NOT1.Next = LPAR2
			LPAR2.Next = AndExpr_Factor_OrExpr_Step3
			AndExpr_Factor_OrExpr_Step3.Next = RPAR4
			AndExpr_Factor_OrExpr0.LastChild = RPAR4

			{
				AndExpr_Factor_OrExpr0.Value = notNode(AndExpr_Factor_OrExpr_Step3.Value.(*predicate))
			}
			_ = NOT1
			_ = LPAR2
			_ = AndExpr_Factor_OrExpr_Step3
			_ = RPAR4
		case 76:
			AndExpr_Factor_OrExpr0 := lhs
			NOT1 := rhs[0]
			LPAR2 := rhs[1]
			AndExpr_Factor_OrExpr_Step_Test3 := rhs[2]
			RPAR4 := rhs[3]

			AndExpr_Factor_OrExpr0.Child = NOT1
			NOT1.Next = LPAR2
			LPAR2.Next = AndExpr_Factor_OrExpr_Step_Test3
			AndExpr_Factor_OrExpr_Step_Test3.Next = RPAR4
			AndExpr_Factor_OrExpr0.LastChild = RPAR4

			{
				AndExpr_Factor_OrExpr0.Value = notNode(AndExpr_Factor_OrExpr_Step_Test3.Value.(*predicate))
			}
			_ = NOT1
			_ = LPAR2
			_ = AndExpr_Factor_OrExpr_Step_Test3
			_ = RPAR4
		case 77:
			AndExpr_Factor_OrExpr0 := lhs
			NOT1 := rhs[0]
			LPAR2 := rhs[1]
			AndExpr_OrExpr3 := rhs[2]
			RPAR4 := rhs[3]

			AndExpr_Factor_OrExpr0.Child = NOT1
			NOT1.Next = LPAR2
			LPAR2.Next = AndExpr_OrExpr3
			AndExpr_OrExpr3.Next = RPAR4
			AndExpr_Factor_OrExpr0.LastChild = RPAR4

			{
				AndExpr_Factor_OrExpr0.Value = notNode(AndExpr_OrExpr3.Value.(*predicate))
			}
			_ = NOT1
			_ = LPAR2
			_ = AndExpr_OrExpr3
			_ = RPAR4
		case 78:
			AndExpr_Factor_OrExpr0 := lhs
			NOT1 := rhs[0]
			LPAR2 := rhs[1]
			OrExpr3 := rhs[2]
			RPAR4 := rhs[3]

			AndExpr_Factor_OrExpr0.Child = NOT1
			NOT1.Next = LPAR2
			LPAR2.Next = OrExpr3
			OrExpr3.Next = RPAR4
			AndExpr_Factor_OrExpr0.LastChild = RPAR4

			{
				AndExpr_Factor_OrExpr0.Value = notNode(OrExpr3.Value.(*predicate))
			}
			_ = NOT1
			_ = LPAR2
			_ = OrExpr3
			_ = RPAR4
		case 79:
			AndExpr_Factor_OrExpr_Path0 := lhs
			PARENT1 := rhs[0]
			AndExpr_Factor_OrExpr_Step2 := rhs[1]

			AndExpr_Factor_OrExpr_Path0.Child = PARENT1
			PARENT1.Next = AndExpr_Factor_OrExpr_Step2
			AndExpr_Factor_OrExpr_Path0.LastChild = AndExpr_Factor_OrExpr_Step2

			{
				AndExpr_Factor_OrExpr_Path0.Value = appendStep(nil, AndExpr_Factor_OrExpr_Step2.Value.(udpeTest), parent)
			}
			_ = PARENT1
			_ = AndExpr_Factor_OrExpr_Step2
		case 80:
			AndExpr_Factor_OrExpr_Path0 := lhs
			PARENT1 := rhs[0]
			AndExpr_Factor_OrExpr_Step_Test2 := rhs[1]

			AndExpr_Factor_OrExpr_Path0.Child = PARENT1
			PARENT1.Next = AndExpr_Factor_OrExpr_Step_Test2
			AndExpr_Factor_OrExpr_Path0.LastChild = AndExpr_Factor_OrExpr_Step_Test2

			{
				AndExpr_Factor_OrExpr_Path0.Value = appendStep(nil, AndExpr_Factor_OrExpr_Step_Test2.Value.(udpeTest), parent)
			}
			_ = PARENT1
			_ = AndExpr_Factor_OrExpr_Step_Test2
		case 81:
			AndExpr_Factor_OrExpr_Step_Test0 := lhs
			TEXT1 := rhs[0]

			AndExpr_Factor_OrExpr_Step_Test0.Child = TEXT1
			AndExpr_Factor_OrExpr_Step_Test0.LastChild = TEXT1

			{
				AndExpr_Factor_OrExpr_Step_Test0.Value = newTextTest("")
			}
			_ = TEXT1
		case 82:
			AndExpr_Factor_OrExpr_Step_Test0 := lhs
			TEXT1 := rhs[0]
			EQ2 := rhs[1]
			STRING3 := rhs[2]

			AndExpr_Factor_OrExpr_Step_Test0.Child = TEXT1
			TEXT1.Next = EQ2
			EQ2.Next = STRING3
			AndExpr_Factor_OrExpr_Step_Test0.LastChild = STRING3

			{
				AndExpr_Factor_OrExpr_Step_Test0.Value = newTextTest(STRING3.Value.(string))
			}
			_ = TEXT1
			_ = EQ2
			_ = STRING3
		}
		_ = ruleFlags
	}

	return &gopapageno.Grammar{
		NumTerminals:  numTerminals,
		NumNonterminals: numNonTerminals,
		MaxRHSLength: maxRHSLen,
		Rules: rules,
		CompressedRules: compressedRules,
		PrecedenceMatrix: precMatrix,
		BitPackedPrecedenceMatrix: bitPackedMatrix,
		Func: fn,
		ParsingStrategy: gopapageno.OPP,
		PreambleFunc: ParserPreallocMem,
	}
}

